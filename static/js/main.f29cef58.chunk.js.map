{"version":3,"sources":["FooterBar.js","HeaderBar.js","redux.js","MovieList.js","HomePage.js","NavigationBar.js","Detail.js","AnalysisPage.js","index.js"],"names":["Footer","Layout","FooterBar","react_default","a","createElement","id","style","textAlign","color","divider","Component","Header","Search","Input","Option","Select","searchType","HeaderBar","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","value","props","onSubmit","content","_this2","selectBefore","es_select","defaultValue","width","onChange","handleChange","className","class","addonBefore","placeholder","enterButton","size","onSearch","handleSearch","fetchData","request","dispatch","fetch","then","response","json","data","type","itemList","handleJson","list","total","jsonList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","JSON","parse","rating","genres","countries","casts","directors","pubdate","err","return","MovieList","console","log","path","basicPath","onPageChange","bind","assertThisInitialized","url","pageNum","Request","method","nextProps","nextState","nextContext","pageNumber","info","changePage","pages","itemLayout","dataSource","renderItem","react_router_dom","to","pathname","movie","Item","key","_id","Meta","avatar","src","poster","onError","title","description","join","rate","disabled","allowHalf","average","Math","floor","rating_people","summary","pagination","showQuickJumper","defaultCurrent","defaultProps","dataList","mapDispatchToProps","connect","HomePage","searchKeyword","isUpdate","keyword","addSearchWord","setState","layout","src_HeaderBar","handleSubmitSearch","src_MovieList","NavigationBar","current","handleClick","e","backToHomePage","menu","onClick","selectedKeys","mode","icon","Detail","location","map","i","name","stars","AnalysisPage","strData","strList","replace","split","length","j","len","temp","push","res","text","handleData","_this3","countryDatas","typeDatas","yearDatas","countryItem","yearItem","years","typeItem","types","country","sort","sortByField","year","x","y","num","hasOwnProperty","substring","others","obj","stringify","isEmptyJson","align","AnalysisPage_Basic","AnalysisPage_Donutrose","AnalysisPage_Basiccolumn","Basic","dv","DataSet","createView","source","transform","callback","b","BizCharts","height","forceFit","transpose","label","offset","position","React","Donutrose","innerRadius","offsetY","offsetX","lineWidth","stroke","Basiccolumn","scale","sales","tickInterval","crosshairs","Main","react_router","exact","component","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","action","objectSpread","applyMiddleware","thunk","ReactDOM","render","es","src_NavigationBar","src_Main","src_FooterBar","document","getElementById"],"mappings":"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","file":"static/js/main.f29cef58.chunk.js","sourcesContent":["import { Component } from 'react'\r\nimport React from  'react'\r\nimport {Divider, Layout} from 'antd'\r\nimport \"antd/dist/antd.css\"\r\nconst Footer = Layout\r\n\r\nclass FooterBar extends Component{\r\n    render() {\r\n        return(\r\n            <Footer id=\"foot\" style={{ textAlign: 'center' ,color:\"gray\"}}>\r\n                <Divider><span id=\"footer\">Movie List ©2019 Created by Mingfeng Ou</span></Divider>\r\n            </Footer>\r\n        )\r\n    }\r\n}\r\nexport default FooterBar","import { Component } from 'react'\r\nimport {Menu,Layout,Input,Select}  from 'antd'\r\nimport React from  'react'\r\nconst Header = Layout\r\nconst Search = Input.Search;\r\nconst Option = Select.Option;\r\nvar searchType = 'title'\r\n\r\nclass HeaderBar extends Component{\r\n    constructor(){\r\n        super()\r\n        this.state={\r\n            searchType:'title'\r\n        }\r\n    }\r\n    handleSearch(value){\r\n        if(this.props.onSubmit){\r\n            if(value!=null && value !== '') {\r\n                const content = value\r\n                this.props.onSubmit(content,searchType)\r\n            }\r\n        }\r\n    }\r\n    handleChange(value){\r\n        searchType=value\r\n    }\r\n    render() {\r\n        const selectBefore = (\r\n            <Select defaultValue=\"按标题\" style={{ width: 100 }} onChange={this.handleChange}>\r\n                <Option value=\"title\">按标题</Option>\r\n                <Option value=\"summary\">按简介</Option>\r\n                <Option value=\"actor\">按演员</Option>\r\n                <Option value=\"time\" >按时间</Option>\r\n            </Select>\r\n        );\r\n        return(\r\n            <Header>\r\n                <div className=\"logo\" />\r\n                <p class=\"pageTitle\">电影列表</p>\r\n                <div>\r\n                <Search\r\n                    addonBefore={selectBefore}\r\n                    placeholder=\"请输入搜索关键字\"\r\n                    enterButton=\"Search\"\r\n                    size=\"large\"\r\n                    onSearch={value=>this.handleSearch(value)}\r\n                />\r\n\r\n                </div>\r\n            </Header>\r\n        )\r\n    }\r\n}\r\nexport default HeaderBar","//const action\r\n\r\nexport const backToHomePage=()=>{\r\n    return{\r\n        type:'HOME',\r\n        basicPath:'http://47.107.167.12:8080/api/movies/page/',\r\n        pageNum:1\r\n    }\r\n\r\n}\r\nexport const addSearchWord=(path)=>{\r\n    return {\r\n        type: 'SEARCH',\r\n        basicPath: path\r\n    }\r\n}\r\nexport const changePage=(pageNum)=>{\r\n    return {\r\n        type:'PAGE',\r\n        pageNum:pageNum\r\n    }\r\n}\r\nexport const fetchData = (request)  =>{\r\n    return dispatch=> {\r\n        fetch(request)//'./films.json')\r\n            .then(response => response.json())\r\n            .then(data => dispatch({\r\n                        type: 'GET_DATA',\r\n                        itemList: handleJson(data.list),\r\n                        total: data.total\r\n                }\r\n                )\r\n            )\r\n    }\r\n}\r\n/*export const  fetchData=(request)=>{\r\n    console.log(request)\r\n    fetch(request)//'./films.json')\r\n        .then(response => response.json())\r\n        .then(data =>{\r\n            return {\r\n                type :'GET_DATA',\r\n                itemList: handleJson(data.list),\r\n                total: data.total\r\n            }\r\n        }\r\n        )\r\n}*/\r\nexport const handleJson=(jsonList)=>{\r\n    for(let item of jsonList){\r\n        item[\"rating\"] = JSON.parse(item.rating)\r\n        item[\"genres\"] = JSON.parse(item.genres)\r\n        item[\"countries\"] = JSON.parse(item.countries)\r\n        item[\"casts\"] = JSON.parse(item.casts)\r\n        item[\"directors\"] = JSON.parse(item.directors)\r\n        item[\"pubdate\"] = JSON.parse(item.pubdate)\r\n    }\r\n\r\n    return jsonList\r\n}\r\nexport const pathReducer = (state, action) => {\r\n    if (!state) return {\r\n        basicPath:'http://47.107.167.12:8080/api/movies/page/',\r\n        pageNum:1,\r\n        itemList:{},\r\n        total:0\r\n    }\r\n    switch (action.type) {\r\n        case 'HOME':\r\n            return{...state,basicPath:action.basicPath,pageNum:action.pageNum}\r\n            break\r\n        case 'SEARCH':\r\n            return { ...state,basicPath: action.basicPath,pageNum:1}//\r\n            break;\r\n        case 'PAGE':\r\n            return {...state,pageNum:action.pageNum}\r\n            break;\r\n        case 'GET_DATA':\r\n            return {...state,itemList:action.itemList,total:action.total}\r\n        default:\r\n            return state\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { List, Avatar ,Rate,Divider,Pagination} from 'antd'\r\nimport \"antd/dist/antd.css\"\r\nimport { Link } from 'react-router-dom'\r\nimport {changePage,fetchData} from \"./redux.js\"\r\nimport {connect} from \"react-redux\";\r\nclass MovieList extends Component {\r\n    static defaultProps = {\r\n        dataList: []\r\n    }\r\n    constructor(props) { //构造函数\r\n        console.log(\"movie list constructor\")\r\n        super(props)\r\n        console.log(this.props.path)\r\n        this.state = {\r\n            basicPath :this.props.basicPath\r\n        }\r\n        this.onPageChange = this.onPageChange.bind(this)\r\n    }\r\n    componentWillMount() {\r\n        console.log(\"movie list componentWillMount\")\r\n        console.log(typeof this.props.basicPath)\r\n        let url = this.props.basicPath +this.props.pageNum\r\n        console.log(url)\r\n        let request = new Request(url, {\r\n                method: 'GET',\r\n            }\r\n        )\r\n        this.props.fetchData(request)\r\n    }\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        return true\r\n    }\r\n\r\n    onPageChange(pageNumber) {\r\n        console.info(\"getData\")\r\n        let request = new Request(this.props.basicPath+pageNumber, {\r\n                method: 'GET',\r\n            }\r\n        )\r\n        this.props.changePage(pageNumber)\r\n        this.props.fetchData(request)\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        console.log(\"movie list componentWillUnmount\")\r\n    }\r\n\r\n\r\n    render() {\r\n        console.log(\"movielist render\")\r\n        const pages = this.props.total\r\n        if(this.props.total!=0) {\r\n            return (\r\n                <div>\r\n                    <List\r\n                        itemLayout=\"vertical\"\r\n                        size=\"large\"\r\n                        dataSource={this.props.itemList}\r\n                        renderItem={item => (\r\n                            <Link to={{pathname: '/detail', state: {movie: item}}}>\r\n                                <List.Item\r\n                                    key={item._id}\r\n                                    //actions={[<IconText type=\"star-o\" text=\"156\" />, <IconText type=\"like-o\" text=\"156\" />, <IconText type=\"message\" text=\"2\" />]}\r\n                                    //extra={<img width={272} alt=\"logo\" src=\"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png\" />}\r\n                                >\r\n                                    <List.Item.Meta\r\n                                        avatar={<img width={150} src={item.poster} onError=\"this.src='empty.png'\"/>}\r\n                                        title={<h1>{item.title}</h1>}\r\n                                        description={\r\n                                            <div>\r\n                                                <span><span>{item.pubdate[0]}</span><span> / </span><span>{item.genres.join(\" / \")}</span></span>\r\n                                                <br/>\r\n                                                <p><Rate disabled allowHalf defaultValue={\r\n                                                    (item.rating.average * 5.0) / 10.0 - Math.floor((item.rating.average * 5.0) / 10.0) > 0.5 ?\r\n                                                        Math.floor((item.rating.average * 5.0) / 10.0) + 0.5 : Math.floor((item.rating.average * 5.0) / 10.0)}/>\r\n                                                    <span\r\n                                                        id=\"score\">{item.rating.average}</span> (评论人数： {item.rating.rating_people})\r\n                                                </p>\r\n                                                <p class=\"summary\">{item.summary}</p>\r\n                                            </div>}\r\n                                    />\r\n                                    <Divider/>\r\n                                </List.Item>\r\n                            </Link>\r\n                        )}\r\n                    />\r\n                    <Pagination showQuickJumper defaultCurrent={this.props.pageNum} total={pages}\r\n                                onChange={this.onPageChange}/>\r\n                </div>\r\n            )\r\n        }else{\r\n            return (<div></div>)\r\n        }\r\n    }\r\n}\r\nconst mapStateToProps=(state)=>{\r\n    console.log(\"movie list mapStateToProps\")\r\n    console.log(state)\r\n    return state\r\n}\r\nconst mapDispatchToProps = {changePage,fetchData}\r\nMovieList = connect(mapStateToProps,mapDispatchToProps)(MovieList)\r\nexport default MovieList","import React, {Component} from \"react\";\r\nimport {Layout} from \"antd\";\r\nimport HeaderBar from \"./HeaderBar\";\r\nimport MovieList from \"./MovieList\";\r\nimport {connect} from 'react-redux'\r\nimport {loadMoreWorkAsync,addSearchWord} from \"./redux.js\"\r\nimport {fetchData} from \"./redux\";\r\nclass HomePage extends Component{\r\n    constructor() { //构造函数\r\n        super();\r\n        console.info(\"index constructor\")\r\n        this.state = {\r\n            onSearch:false,\r\n            searchKeyword:'',\r\n            total:0\r\n        }\r\n    }\r\n    componentWillMount(){\r\n        console.info(\"index componentWillMount\")\r\n        //store.subscribe(() => this._updateThemeColor())\r\n    }\r\n    componentDidMount() {\r\n        console.info(\"index componentDidMount\")\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps,nextState){\r\n        console.info(\"index shouldComponentUpdate\")\r\n        const isUpdate = ((nextState.onSearch == true) && (nextState.searchKeyword !== this.state.searchKeyword))\r\n        //|| ( this.state.dataList !== nextState.dataList)\r\n        //console.log(\"nextState.onSearch is\",nextState.onSearch,\"nextState.dataList is\" , nextState.dataList,\"thisState.dataList is\",this.state.dataList)\r\n        console.log(isUpdate)\r\n        return isUpdate\r\n    }\r\n    handleSubmitSearch(keyword,searchType){\r\n        /*var resultArray = []\r\n        for (var i = 0 ,len = this.state.dataList.length; i < len-1  ; i++) {\r\n            if(searchType ==\"title\") {\r\n                if (this.state.dataList[i].title.indexOf(keyword) >= 0) {\r\n                    resultArray.push(this.state.dataList[i]);\r\n                }\r\n            }else if(searchType == \"summary\"){\r\n                if (this.state.dataList[i].summary.indexOf(keyword) >= 0) {\r\n                    resultArray.push(this.state.dataList[i]);\r\n                }\r\n            }else if(searchType == \"actor\"){\r\n                var actor = this.state.dataList[i].casts\r\n                for(var i = 0,len = actor.length;i<len;i++){\r\n                    if(actor[i].name.indexOf(keyword)>=0){\r\n                        resultArray.push(this.state.dataList[i]);\r\n                        break\r\n                    }\r\n                }\r\n            }else if(searchType==\"time\"){\r\n                var time = this.state.dataList[i].pubdate[0]\r\n                if(time.indexOf(keyword)>=0) {\r\n                    resultArray.push(this.state.dataList[i]);\r\n                }\r\n            }else{\r\n                alert(searchType)\r\n            }\r\n        }*/\r\n        let type = 0\r\n        switch (searchType) {\r\n            case \"title\":\r\n                type = 0\r\n                break\r\n            case \"summary\":\r\n                type = 1\r\n                break\r\n            case \"actor\":\r\n                type = 2\r\n                break\r\n            case \"time\":\r\n                type = 3\r\n                break\r\n        }\r\n        let basicPath = 'http://47.107.167.12:8080/api/movies/search/keyword/'+keyword+'/type/'+type+'/page/'\r\n        this.props.addSearchWord(basicPath)\r\n        let request = new Request(basicPath+'1', {\r\n                method: 'GET',\r\n            }\r\n        )\r\n        this.props.fetchData(request)\r\n        this.setState({onSearch:true,searchKeyword:keyword})\r\n\r\n    }\r\n    render() {\r\n        console.info(\"index render\")\r\n        return (\r\n            <Layout color={\"#fff\"}>\r\n                <HeaderBar onSubmit={this.handleSubmitSearch.bind(this)}/>\r\n                <MovieList/>\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n//会订阅 Store，每当state更新的时候，就会自动执行，重新计算 UI 组件的参数，从而触发 UI 组件的重新渲染\r\nconst mapStateToProps=(state)=>{\r\n    return state\r\n}\r\n//键值应该是一个函数，会被当作 Action creator ，返回的 Action 会由 Redux 自动发出\r\n\r\n//是connect函数的第二个参数，用来建立 UI 组件的参数到store.dispatch方法的映射。也就是说，它定义了哪些用户的操作应该当作 Action，传给 Store\r\nconst mapDispatchToProps = {addSearchWord,fetchData}\r\n//建立一个从（外部的）state对象到（UI 组件的）props对象的映射关系\r\n//生成一个容器组件，前面的只是UI组件\r\nHomePage = connect(mapStateToProps,mapDispatchToProps)(HomePage)\r\nexport default HomePage","import { Menu, Icon } from 'antd'\r\nimport { Component } from 'react'\r\nimport React from  'react'\r\nimport { Link } from 'react-router-dom'\r\nimport {backToHomePage, changePage, fetchData} from './redux'\r\nimport {connect} from \"react-redux\";\r\nimport MovieList from \"./MovieList\";\r\n\r\nclass NavigationBar extends Component{\r\n    state = {\r\n        current: 'home',\r\n    }\r\n    handleClick = (e) => {\r\n        console.log('click ', e);\r\n        this.setState({\r\n            current: e.key,\r\n        });\r\n        if(e.key ==\"home\"){\r\n            this.props.backToHomePage()\r\n            let request = new Request('http://47.107.167.12:8080/api/movies/page/'+'1', {\r\n                    method: 'GET',\r\n                }\r\n            )\r\n            this.props.fetchData(request)\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Menu\r\n                onClick={this.handleClick}\r\n                selectedKeys={[this.state.current]}\r\n                mode=\"horizontal\"\r\n            >\r\n                <Menu.Item key=\"home\" >\r\n                    <Link to='/'><Icon type=\"mail\" />HomePage</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"analysis\" >\r\n                    <Link to='/analysis'><Icon type=\"appstore\" />AnalysisPage</Link>\r\n                </Menu.Item>\r\n            </Menu>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps=(state)=>{\r\n    return state\r\n}\r\nconst mapDispatchToProps = {fetchData,backToHomePage}\r\nNavigationBar = connect(mapStateToProps,mapDispatchToProps)(NavigationBar)\r\nexport default NavigationBar","import { Component } from 'react'\r\nimport {Menu,Layout,Input,Rate}  from 'antd'\r\nimport React from  'react'\r\nclass Detail extends  Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state =\r\n        {\r\n            movie:this.props.location.state.movie\r\n        }\r\n    }\r\n    render() {\r\n        const movie = this.state.movie\r\n        return (\r\n            <div>\r\n                <p class=\"pageTitle\">{movie.title}</p>\r\n                <div class = \"moviePoster\">\r\n                    <span ><img width={250} src={movie.poster} onError=\"this.src='empty.png'}\"/></span>\r\n                    <br />\r\n                </div>\r\n                <div class=\"introduction\">\r\n                    <br/>\r\n                    <p><span>发行时间: </span> <span>{movie.pubdate[0]}</span></p>\r\n                    <p>国家：{movie.countries}</p>\r\n                    <p>类型：{movie.genres.join(\" / \")}</p>\r\n                    <p>导演：{movie.directors.map((item, i) => {  return <span> {item.name} / </span>})}</p>\r\n                    <p>主演：{movie.casts.map((item, i) => {  return <span> {item.name} / </span>})}</p>\r\n                </div>\r\n                <div class=\"ratingGroup\">\r\n                    <Rate disabled defaultValue={5}/> {movie.rating.stars[0]}<span>%</span>\r\n                    <br/>\r\n                    <Rate disabled  defaultValue={4}/> {movie.rating.stars[1]}<span>%</span>\r\n                    <br/>\r\n                    <Rate disabled  defaultValue={3}/> {movie.rating.stars[2]}<span>%</span>\r\n                    <br/>\r\n                    <Rate disabled  defaultValue={2}/> {movie.rating.stars[3]}<span>%</span>\r\n                    <br/>\r\n                    <Rate disabled  defaultValue={1}/> {movie.rating.stars[4]}<span>%</span>\r\n                    <br/>\r\n                </div>\r\n                <div>\r\n                    <p>简介：{movie.summary}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Detail","import { Component } from 'react'\r\nimport React from  'react'\r\nimport {\r\n    G2,\r\n    Chart,\r\n    Geom,\r\n    Axis,\r\n    Tooltip,\r\n    Coord,\r\n    Label,\r\n    Legend,\r\n    View,\r\n    Guide,\r\n    Shape,\r\n    Facet,\r\n    Util\r\n} from \"bizcharts\";\r\nimport DataSet from \"@antv/data-set\";\r\nimport {Divider} from \"antd\";\r\nclass AnalysisPage extends Component {\r\n    constructor() { //构造函数\r\n        super();\r\n        console.info(\"constructor\")\r\n        this.state = {\r\n            dataList: {},\r\n        }\r\n    }\r\n\r\n    handleData(strData) {\r\n        const str = strData.replace(/[\\b\\f\\r\\t]/g, '')\r\n        const strList = str.split('\\n')\r\n        var dataList = []\r\n        console.info(strList.length)\r\n        for (var j = 0, len = strList.length - 1; j < len; j++) {\r\n            console.log(strList[j])\r\n            //console.log(strList[j].replace(/[\\\\]/g, ''))\r\n            var temp = ''\r\n            temp = strList[j].replace(/[\\\\]/g, '')\r\n            console.log(temp)\r\n            try {\r\n                const data = JSON.parse(temp)\r\n                //console.info(j)\r\n                dataList.push(data)\r\n            } catch (e) {\r\n                console.info(j)\r\n            }\r\n        }\r\n        return dataList\r\n    }\r\n\r\n    getData() {\r\n        console.info(\"getData\")\r\n        fetch('./films.json')\r\n            .then(res => res.text())\r\n            .then(res => this.setState({dataList: this.handleData(res)}))\r\n    }\r\n\r\n    componentWillMount() {\r\n        console.info(\"analysis page componentWillMount\")\r\n        let request = new Request('http://47.107.167.12:8080/api/movies/analysis', {\r\n                method: 'GET',\r\n            }\r\n        )\r\n        fetch(request)//'./films.json')\r\n            .then(response => response.json())\r\n            .then(data =>this.setState({dataList:this.handleJson(data)}))\r\n    }\r\n    handleJson(json){\r\n        let countryDatas=[];\r\n        let typeDatas=[];\r\n        let yearDatas=[];\r\n        let countryItem = json.countries\r\n        let yearItem = json.years\r\n        let typeItem = json.types\r\n        for (var key in countryItem){\r\n            let item = {}\r\n            item[\"country\"] = key\r\n            item[\"num\"] = countryItem[key]\r\n            countryDatas.push(item)\r\n        }\r\n        for(var key in yearItem){\r\n            var item = {}\r\n            item[\"year\"] = key\r\n            item[\"population\"] = yearItem[key]\r\n            yearDatas.push(item)\r\n        }\r\n        for (var key in typeItem){\r\n            var item = {}\r\n            item[\"type\"] = key\r\n            item[\"num\"] = typeItem[key]\r\n            typeDatas.push(item)\r\n        }\r\n        return {country:countryDatas.sort(this.sortByField),year:yearDatas,type:typeDatas}\r\n    }\r\n    sortByField(x, y) {\r\n        return x.num - y.num\r\n    }\r\n    analyseData() {\r\n        var countryDatas=[];\r\n        var countryItem = {};\r\n        var typeDatas=[]\r\n        var typeItem = {}\r\n        var yearDatas=[]\r\n        var yearItem={}\r\n        yearItem[\"1970之前\"] =0\r\n        yearItem[\"70年代\"] = 0\r\n        yearItem[\"80年代\"] = 0\r\n        yearItem[\"90年代\"] = 0\r\n        yearItem[\"00年代\"] = 0\r\n        yearItem[\"2010年之后\"] = 0\r\n\r\n        for (var j = 0, len = this.state.dataList.length; j < len; j++) {\r\n            for(var i = 0, length = this.state.dataList[j].genres.length; i < length; i++){\r\n                if(typeItem.hasOwnProperty(this.state.dataList[j].genres[i])){\r\n                    typeItem[this.state.dataList[j].genres[i]] +=1\r\n                }else{\r\n                    typeItem[this.state.dataList[j].genres[i]] = 1\r\n                }\r\n            }\r\n            for(var i = 0, length = this.state.dataList[j].countries.length; i < length; i++){\r\n                if(countryItem.hasOwnProperty(this.state.dataList[j].countries[i])){\r\n                    countryItem[this.state.dataList[j].countries[i]] +=1\r\n                }else{\r\n                    countryItem[this.state.dataList[j].countries[i]] = 1\r\n                }\r\n            }\r\n            if(this.state.dataList[j].pubdate[0]!=null && this.state.dataList[j].pubdate[0].length>2){\r\n                const year = this.state.dataList[j].pubdate[0].substring(0,4)\r\n                if(year<1970){\r\n                    yearItem[\"1970之前\"] += 1\r\n                }else if(year<1980){\r\n                    yearItem[\"70年代\"] += 1\r\n                }else if(year < 1990){\r\n                    yearItem[\"80年代\"] += 1\r\n                }else if(year < 2000){\r\n                    yearItem[\"90年代\"] += 1\r\n                }else if(year<2010){\r\n                    yearItem[\"00年代\"] += 1\r\n                }else{\r\n                    yearItem[\"2010年之后\"] += 1\r\n                }\r\n            }\r\n        }\r\n        var others = {}\r\n        others[\"country\"] = \"其他\"\r\n        others[\"num\"] = 0\r\n        for (var key in countryItem){\r\n            if(countryItem[key]>3) {\r\n                var item = {}\r\n                item[\"country\"] = key\r\n                item[\"num\"] = countryItem[key]\r\n                countryDatas.push(item)\r\n            }else {\r\n                others[\"num\"] +=countryItem[key]\r\n            }\r\n        }\r\n        countryDatas.push(others)\r\n\r\n\r\n        for(var key in yearItem){\r\n            var item = {}\r\n            item[\"year\"] = key\r\n            item[\"population\"] = yearItem[key]\r\n            yearDatas.push(item)\r\n        }\r\n\r\n\r\n        for (var key in typeItem){\r\n            var item = {}\r\n            item[\"type\"] = key\r\n            item[\"num\"] = typeItem[key]\r\n            typeDatas.push(item)\r\n        }\r\n        return {country:countryDatas.sort(this.sortByField),year:yearDatas,type:typeDatas}\r\n    }\r\n    isEmptyJson(obj) {\r\n        if (JSON.stringify(obj) == '{}') {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    render() {\r\n        if (!this.isEmptyJson(this.state.dataList)) {\r\n            console.log(this.state.dataList)\r\n            const data = this.state.dataList//this.analyseData()\r\n            const country = data.country\r\n            const year = data.year\r\n            const type = data.type\r\n            return (\r\n                <div>\r\n                    <Divider><h1 align=\"center\">国家分布</h1></Divider>\r\n                    <Basic class=\"Basic\" data={country}/>\r\n                    <Divider><h1 align=\"center\">年份分布</h1></Divider>\r\n                    <Donutrose class=\"Donutrose\" data={year}/>\r\n                    <Divider><h1 align=\"center\">类型分布</h1></Divider>\r\n                    <Basiccolumn data={type}/>\r\n                </div>\r\n            )\r\n        }else{\r\n            return (<div></div>)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nclass Basic extends React.Component {\r\n    render() {\r\n        const countryCols = {\r\n            country: { alias: '国家' },\r\n            num: { alias: '数量' }\r\n        };\r\n        const data = this.props.data\r\n        console.log(data)\r\n        const ds = new DataSet();\r\n        const dv = ds.createView().source(data);\r\n        dv.source(data).transform({\r\n            type: \"sort\",\r\n            callback(a, b) {\r\n                // 排序依据，和原生js的排序callback一致\r\n                return true ;\r\n            }\r\n        });\r\n        return (\r\n            <div class=\"Basic\">\r\n                <Chart height={800}    data={dv} forceFit>\r\n                    <Coord transpose />\r\n                    <Axis\r\n                        name=\"country\"\r\n                        label={{\r\n                            offset: 12\r\n                        }}\r\n                    />\r\n                    <Axis name=\"num\" />\r\n                    <Tooltip />\r\n                    <Geom type=\"interval\" position=\"country*num\" color=\"country\" />\r\n                </Chart>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nclass Donutrose extends React.Component {\r\n    render() {\r\n        const data = this.props.data\r\n        return (\r\n            <div>\r\n                <Chart height={400} data={data} forceFit>\r\n                    <Coord type=\"polar\" innerRadius={0.2} />\r\n                    <Tooltip />\r\n                    <Legend\r\n                        position=\"right\"\r\n                        offsetY={-50}\r\n                        offsetX={-300}\r\n                    />\r\n                    <Geom\r\n                        type=\"interval\"\r\n                        color=\"year\"\r\n                        position=\"year*population\"\r\n                        style={{\r\n                            lineWidth: 1,\r\n                            stroke: \"#fff\"\r\n                        }}\r\n                    />\r\n                </Chart>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nclass Basiccolumn extends React.Component {\r\n    render() {\r\n        const data = this.props.data\r\n        const cols = {\r\n            sales: {\r\n                tickInterval: 20\r\n            }\r\n        };\r\n        return (\r\n            <div>\r\n                <Chart height={400} data={data} scale={cols} forceFit>\r\n                    <Axis name=\"type\" />\r\n                    <Axis name=\"num\" />\r\n                    <Tooltip\r\n                        crosshairs={{\r\n                            type: \"y\"\r\n                        }}\r\n                    />\r\n                    <Geom type=\"interval\" position=\"type*num\" />\r\n                </Chart>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default AnalysisPage\r\n","import { Component } from 'react'\nimport React from  'react'\nimport ReactDOM from 'react-dom'\nimport FooterBar from './FooterBar'\nimport HomePage from './HomePage'\nimport NavigationBar from \"./NavigationBar\"\nimport Detail from \"./Detail\"\nimport \"antd/dist/antd.css\"\nimport './index.css'\nimport { Switch,Route,HashRouter } from 'react-router-dom'\nimport AnalysisPage from \"./AnalysisPage\"\nimport {createStore,applyMiddleware,compose} from \"redux\"\nimport thunk from 'redux-thunk'\nimport { Provider } from 'react-redux'\nimport {pathReducer,changePage,addSearchWord} from \"./redux.js\"\n\nclass Main extends Component{\n    render() {\n        return( <main>\n            <Switch>\n                <Route exact path='/' component={HomePage}/>\n                <Route path='/analysis' component={AnalysisPage}/>\n                <Route path='/detail' component={Detail}/>\n            </Switch>\n        </main>)\n    }\n}\nconst MovieWeb = () => (\n    <div>\n        <NavigationBar/>\n        <Main />\n        <FooterBar/>\n    </div>\n)\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(pathReducer,composeEnhancers(\n    applyMiddleware(thunk))\n)\nReactDOM.render(\n    <Provider store={store}>\n        <HashRouter>\n            <MovieWeb/>\n        </HashRouter>\n    </Provider>\n        ,document.getElementById('root')\n)\n\n"],"sourceRoot":""}